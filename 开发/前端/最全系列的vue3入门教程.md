# æœ€å…¨ç³»åˆ—çš„vue3å…¥é—¨æ•™ç¨‹
| [ç‚¹å‡»åœ¨çº¿é˜…è¯»ï¼Œä½“éªŒæ›´å¥½](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn") | [é“¾æ¥](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn") |
| --- | --- |
| **[ç°ä»£JavaScripté«˜çº§å°å†Œ](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn")** | [é“¾æ¥](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn") |
| **[æ·±å…¥æµ…å‡ºDart](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn")** | [é“¾æ¥](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn") |
| **[ç°ä»£TypeScripté«˜çº§å°å†Œ](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn")** | [é“¾æ¥](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn "https://www.coding-time.cn") |
| **[linwuçš„ç®—æ³•ç¬”è®°ğŸ“’](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn%2Flc "https://www.coding-time.cn/lc")** | [é“¾æ¥](https://link.juejin.cn/?target=https%3A%2F%2Fwww.coding-time.cn%2Flc "https://www.coding-time.cn/lc") |

Vue 3 ç®€ä»‹
--------

Vue 3 æ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€æºJavaScriptæ¡†æ¶ï¼Œç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢å’Œå•é¡µé¢åº”ç”¨ã€‚å®ƒå¸¦æ¥äº†è®¸å¤šæ–°ç‰¹æ€§å’Œæ”¹è¿›ï¼ŒåŒ…æ‹¬æ›´å¥½çš„æ€§èƒ½ã€æ›´å°çš„æ‰“åŒ…å¤§å°ã€æ›´å¥½çš„TypeScriptæ”¯æŒã€å…¨æ–°çš„ç»„åˆå¼ APIï¼Œä»¥åŠä¸€äº›æ–°çš„å†…ç½®ç»„ä»¶ã€‚

### 1\. Vue 3 çš„æ–°ç‰¹æ€§

Vue 3å¼•å…¥äº†è®¸å¤šæ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬ï¼š

*   ç»„åˆå¼APIï¼šè¿™æ˜¯Vue 3æœ€é‡è¦çš„æ–°ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸æ›´çµæ´»ã€æ›´é€»è¾‘åŒ–åœ°ç»„ç»‡ä»£ç ã€‚
*   æ›´å¥½çš„æ€§èƒ½ï¼šVue 3çš„è™šæ‹ŸDOMé‡å†™ï¼Œæä¾›äº†æ›´å¿«çš„æŒ‚è½½ã€ä¿®è¡¥å’Œæ¸²æŸ“é€Ÿåº¦ã€‚
*   æ›´å°çš„æ‰“åŒ…å¤§å°ï¼šç”±äºæ–°çš„æ¶æ„å’Œæ ‘æ‘‡æŠ€æœ¯ï¼ŒVue 3çš„æ‰“åŒ…å¤§å°æ¯”Vue 2å°ã€‚
*   æ›´å¥½çš„TypeScriptæ”¯æŒï¼šVue 3åœ¨å†…éƒ¨ä½¿ç”¨äº†TypeScriptï¼Œå› æ­¤å®ƒä¸ºå¼€å‘è€…æä¾›äº†æ›´å¥½çš„TypeScriptæ”¯æŒã€‚

### 2\. ä¸ Vue 2 çš„åŒºåˆ«

Vue 3ä¸Vue 2çš„ä¸»è¦åŒºåˆ«åŒ…æ‹¬ï¼š

*   æ„å»ºï¼šVue 3ä½¿ç”¨monorepoæ¶æ„ï¼Œæ›´å®¹æ˜“ç®¡ç†å’Œç»´æŠ¤ã€‚
*   APIï¼šVue 3å¼•å…¥äº†æ–°çš„ç»„åˆå¼APIï¼Œå®ƒæä¾›äº†æ›´çµæ´»çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚
*   æ€§èƒ½ï¼šVue 3æä¾›äº†æ›´å¥½çš„æ€§èƒ½ï¼ŒåŒ…æ‹¬æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦å’Œæ›´å°çš„æ‰“åŒ…å¤§å°ã€‚
*   TypeScriptï¼šVue 3æä¾›äº†æ›´å¥½çš„TypeScriptæ”¯æŒã€‚

### 3\. å…¨æ–°çš„æ ¸å¿ƒæ¶æ„

Vue 3çš„æ ¸å¿ƒæ¶æ„è¿›è¡Œäº†å…¨é¢çš„é‡å†™å’Œä¼˜åŒ–ï¼Œä»¥æé«˜æ€§èƒ½å’Œçµæ´»æ€§ã€‚æ­¤å¤–ï¼ŒVue 3è¿˜å¼•å…¥äº†è®¸å¤šæ–°çš„APIå’Œç»„ä»¶ï¼Œä»¥æ»¡è¶³ç°ä»£webå¼€å‘çš„éœ€æ±‚ã€‚

åŸºç¡€
--

### 1\. åˆ›å»º Vue 3 é¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Viteåˆ›å»ºä¸€ä¸ªæ–°çš„Vue 3é¡¹ç›®ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®‰è£…Viteï¼š

```bash
pnpm create vite

```

ç„¶åï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„Vue 3é¡¹ç›®ï¼š

```bash
pnpm create vite my-vue-app --template vue-ts

```

### 2\. åº”ç”¨å’Œç»„ä»¶ç¼–å†™

åœ¨Vue 3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–°çš„ç»„åˆå¼APIåˆ›å»ºå’Œç®¡ç†ç»„ä»¶ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„Vue 3ç»„ä»¶ç¤ºä¾‹ï¼š

```javascript
<template>
  <div>
    <p>{{ count }}</p>
    <button @click="increment">Increment</button>
  </div>
</template>

<script>
import { ref } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const increment = () => { count.value++ }

    return {
      count,
      increment
    }
  }
}
</script>

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¼å…¥äº† `ref` å‡½æ•°ï¼Œç„¶ååœ¨ `setup` å‡½æ•°ä¸­ä½¿ç”¨ `ref` åˆ›å»ºäº†ä¸€ä¸ªå“åº”å¼å€¼ `count`ã€‚æˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ª `increment` å‡½æ•°ï¼Œç”¨äºå¢åŠ  `count` çš„å€¼ã€‚æœ€åï¼Œæˆ‘ä»¬å°† `count` å’Œ `increment` è¿”å›ç»™æ¨¡æ¿ï¼Œä»¥ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å®ƒä»¬ã€‚

å“åº”å¼ç³»ç»Ÿ
-----

### 1\. å“åº”å¼åŸç†

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9cfe6a0d0ddd43738241a7b4d04964dc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
 Vueçš„å“åº”å¼ç³»ç»Ÿæ˜¯å…¶æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒä½¿å¾—æ•°æ®å˜æ›´èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°åˆ°UIä¸Šã€‚åœ¨Vue 3ä¸­ï¼Œè¿™ä¸ªç³»ç»ŸåŸºäºJavaScriptçš„ `Proxy` å¯¹è±¡é‡å†™ï¼Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œæ›´å¤šçš„åŠŸèƒ½ã€‚

### 2\. ref å’Œ reactive

Vue 3æä¾›äº†ä¸¤ä¸ªä¸»è¦çš„å‡½æ•°æ¥åˆ›å»ºå“åº”å¼æ•°æ®ï¼š`ref` å’Œ `reactive`ã€‚

`ref` å‡½æ•°åˆ›å»ºä¸€ä¸ªå“åº”å¼å¼•ç”¨ã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨å“åº”å¼å¼•ç”¨çš„å€¼ï¼Œè€Œåœ¨JavaScriptä»£ç ä¸­ï¼Œä½ éœ€è¦é€šè¿‡ `.value` å±æ€§æ¥è®¿é—®æˆ–ä¿®æ”¹å®ƒçš„å€¼ã€‚

```javascript
import { ref } from 'vue'

const count = ref(0)
console.log(count.value) 
count.value++ 

```

`reactive` å‡½æ•°åˆ›å»ºä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€‚ä½ å¯ä»¥ç›´æ¥è®¿é—®å’Œä¿®æ”¹å®ƒçš„å±æ€§ã€‚

```javascript
import { reactive } from 'vue'

const state = reactive({ count: 0 })
console.log(state.count) 
state.count++ 

```

### 3\. å®ç°æœºåˆ¶åŒºåˆ«

`ref` å’Œ `reactive` çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œ`ref` æ˜¯ä¸ºäº†è®©åŸºæœ¬ç±»å‹ï¼ˆå¦‚æ•°å­—å’Œå­—ç¬¦ä¸²ï¼‰å¯ä»¥å˜ä¸ºå“åº”å¼ï¼Œè€Œ `reactive` æ˜¯ä¸ºäº†è®©å¯¹è±¡å˜ä¸ºå“åº”å¼ã€‚

`ref` åˆ›å»ºçš„å“åº”å¼æ•°æ®éœ€è¦é€šè¿‡ `.value` å±æ€§è¿›è¡Œè®¿é—®å’Œä¿®æ”¹ï¼Œè€Œ `reactive` åˆ›å»ºçš„å“åº”å¼å¯¹è±¡å¯ä»¥ç›´æ¥è®¿é—®å’Œä¿®æ”¹å…¶å±æ€§ã€‚å› æ­¤ï¼Œ`ref` æ›´é€‚åˆäºå¤„ç†åŸºæœ¬ç±»å‹ï¼Œè€Œ `reactive` æ›´é€‚åˆäºå¤„ç†å¯¹è±¡ã€‚

ç»„åˆå¼ API
-------

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3fafbfc601e0493aa27c32a3386f1c2f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
 ç»„åˆå¼APIæ˜¯Vue 3çš„é‡è¦æ–°ç‰¹æ€§ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´çµæ´»ã€æ›´é€»è¾‘åŒ–çš„æ–¹å¼æ¥ç»„ç»‡å’Œå¤ç”¨ä»£ç ã€‚

### 1\. setup å‡½æ•°

åœ¨Vue 3ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `setup` å‡½æ•°æ¥ä½¿ç”¨ç»„åˆå¼APIã€‚`setup` å‡½æ•°æ˜¯ç»„ä»¶çš„å…¥å£ç‚¹ï¼Œåœ¨ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå’Œåˆå§‹åŒ–ä¹‹åï¼Œä½†åœ¨æ¸²æŸ“å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨ã€‚

```javascript
export default {
  setup() {
    
  }
}

```

### 2\. å“åº”å¼ç¼–ç¨‹

ä½ å¯ä»¥åœ¨ `setup` å‡½æ•°ä¸­ä½¿ç”¨ `ref` å’Œ `reactive` æ¥åˆ›å»ºå“åº”å¼æ•°æ®ã€‚

```javascript
import

 { ref, reactive } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const state = reactive({ name: 'Vue' })

    return {
      count,
      state
    }
  }
}

```

### 3\. è®¡ç®—å±æ€§ä¸ç›‘è§†

ä½ å¯ä»¥ä½¿ç”¨ `computed` å’Œ `watch` æ¥åˆ›å»ºè®¡ç®—å±æ€§å’Œç›‘è§†å“åº”å¼æ•°æ®çš„å˜åŒ–ã€‚

```javascript
import { ref, computed, watch } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const doubled = computed(() => count.value * 2)

    watch(count, (newValue, oldValue) => {
      console.log(`count changed from ${oldValue} to ${newValue}`)
    })

    return {
      count,
      doubled
    }
  }
}

```

### 4\. ç”Ÿå‘½å‘¨æœŸé’©å­

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2710a3f6633041c3bc39c106a46a75ca~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
 ä½ å¯ä»¥åœ¨ `setup` å‡½æ•°ä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ¯”å¦‚ `onMounted`ã€`onUpdated` å’Œ `onUnmounted`ã€‚

```javascript
import { onMounted, onUpdated, onUnmounted } from 'vue'

export default {
  setup() {
    onMounted(() => {
      console.log('component mounted')
    })

    onUpdated(() => {
      console.log('component updated')
    })

    onUnmounted(() => {
      console.log('component unmounted')
    })
  }
}

```

### 5\. è‡ªå®šä¹‰ hooks

ä½ å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„hooksæ¥å¤ç”¨ä»£ç ã€‚ä¸€ä¸ªè‡ªå®šä¹‰hookå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå¯ä»¥ä½¿ç”¨å…¶ä»–çš„å“åº”å¼æ•°æ®å’Œç»„åˆå¼APIã€‚

```javascript
import { ref, onMounted } from 'vue'

function useCounter() {
  const count = ref(0)

  const increment = () => {
    count.value++
  }

  onMounted(() => {
    console.log('counter mounted')
  })

  return {
    count,
    increment
  }
}

export default {
  setup() {
    const counter = useCounter()

    return {
      counter
    }
  }
}

```

é«˜çº§åŠŸèƒ½
----

### 1\. æµ…å±‚å“åº”å¼

åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³è¦åˆ›å»ºä¸€ä¸ªæµ…å±‚çš„å“åº”å¼å¯¹è±¡ï¼Œè¿™æ ·å…¶å†…éƒ¨çš„å±æ€§ä¸ä¼šè¢«è½¬åŒ–ä¸ºå“åº”å¼çš„ã€‚è¿™å¯ä»¥é€šè¿‡ `shallowReactive` å‡½æ•°æ¥å®ç°ã€‚

```javascript
import { shallowReactive } from 'vue'

const state = shallowReactive({ count: 0 })

```

### 2\. åªè¯»æ•°æ®

ä½ å¯ä»¥ä½¿ç”¨ `readonly` å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåªè¯»çš„å“åº”å¼å¯¹è±¡ã€‚ä»»ä½•è¯•å›¾ä¿®æ”¹åªè¯»å¯¹è±¡çš„æ“ä½œéƒ½å°†åœ¨å¼€å‘ç¯å¢ƒä¸‹å¼•å‘ä¸€ä¸ªé”™è¯¯ã€‚

```javascript
import { readonly } from 'vue'

const state = readonly({ count: 0 })

```

### 3\. è‡ªå®šä¹‰ Ref

ä½ å¯ä»¥ä½¿ç”¨ `customRef` å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„å“åº”å¼å¼•ç”¨ã€‚è¿™å…è®¸ä½ æ§åˆ¶å’Œè§‚å¯Ÿå½“å¼•ç”¨çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶çš„è¡Œä¸ºã€‚

```javascript
import { customRef } from 'vue'

const count = customRef((track, trigger) => {
  let value = 0

  return {
    get() {
      track()
      return value
    },
    set(newValue) {
      value = newValue
      trigger()
    }
  }
})

```

### 4\. toRefs å’Œ toRef

å½“æˆ‘ä»¬ä» `setup` å‡½æ•°è¿”å›ä¸€ä¸ªå“åº”å¼å¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„å±æ€§å°†å¤±å»å“åº”å¼ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `toRefs` æˆ– `toRef` å‡½æ•°ã€‚

```javascript
import { reactive, toRefs } from 'vue'

export default {
  setup() {
    const state = reactive({ count: 0 })

    return {
      ...toRefs(state)
    }
  }
}

```

æ–°ç»„ä»¶
---

### 1\. Fragment

åœ¨Vue 3ä¸­ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶çš„æ¨¡æ¿ä¸­æœ‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿™è¢«ç§°ä¸º Fragmentã€‚

```vue
<template>
  <div>Hello</div>
  <div>World</div>
</template>

```

### 2\. Teleport

Teleport ç»„ä»¶å…è®¸ä½ å°†å­ç»„ä»¶æ¸²æŸ“åˆ°DOMçš„ä»»ä½•ä½ç½®ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒçš„çˆ¶ç»„ä»¶ä¸­ã€‚

```vue
<teleport to="#modal">
  <div>This will be rendered wherever the #modal element is.</div>
</teleport>

```

### 3\. Suspense

Suspense ç»„ä»¶å…è®¸ä½ ç­‰å¾…ä¸€ä¸ªæˆ–å¤šä¸ªå¼‚æ­¥ç»„ä»¶ï¼Œç„¶åæ˜¾ç¤ºä¸€äº›å¤‡ç”¨å†…å®¹ï¼Œç›´åˆ°æ‰€æœ‰çš„å¼‚æ­¥ç»„ä»¶éƒ½è¢«è§£æã€‚

```vue
<Suspense>
  <template #default>
    <AsyncComponent />
  </template>
  <template #fallback>
    <div>Loading...</div>
  </template>
</Suspense>

```

æ·±å…¥ç¼–è¯‘ä¼˜åŒ–
------

Vue 3åœ¨ç¼–è¯‘ä¼˜åŒ–ä¸Šåšå‡ºäº†å¾ˆå¤§çš„æå‡ã€‚åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼ŒVue 3å¯¹æ¨¡æ¿è¿›è¡Œé™æ€åˆ†æï¼Œæå–å‡ºä¸ä¼šæ”¹å˜çš„éƒ¨åˆ†ï¼Œé¢„ç¼–è¯‘ä¸ºçº¯JavaScriptï¼Œè¿™å¤§å¤§æé«˜äº†è¿è¡Œæ—¶çš„æ¸²æŸ“æ•ˆç‡ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™äº›ä¼˜åŒ–ã€‚

### é™æ€èŠ‚ç‚¹æå‡

åœ¨ Vue 3 ä¸­ï¼Œå¦‚æœä½ çš„æ¨¡æ¿ä¸­æœ‰ä¸ä¼šæ”¹å˜çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š

```html
<template>
  <div>
    <h1>Hello, world!</h1>
    <p>Welcome to Vue 3</p>
  </div>
</template>

```

åœ¨ç¼–è¯‘æ—¶ï¼Œ"Hello, world!" å’Œ "Welcome to Vue 3" è¿™äº›é™æ€èŠ‚ç‚¹å°†ä¼šè¢«æå‡ï¼Œé¿å…äº†æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½éœ€è¦é‡æ–°åˆ›å»ºã€‚

### ç‰‡æ®µã€æ¨¡æ¿å¹¶ç”¨

åœ¨ Vue 3 ä¸­ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶æ¨¡æ¿ä¸­æœ‰å¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯ç‰‡æ®µï¼š

```html
<template>
  <header>Header</header>
  <main>Main content</main>
  <footer>Footer</footer>
</template>

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªæ ¹èŠ‚ç‚¹ï¼Œè¿™åœ¨ Vue 2 ä¸­æ˜¯ä¸å…è®¸çš„ã€‚ä½†åœ¨ Vue 3 ä¸­ï¼Œè¿™æ˜¯å®Œå…¨æ­£å¸¸çš„ã€‚

### åŠ¨æ€ç¼–è¯‘

Vue 3 çš„åŠ¨æ€ç¼–è¯‘å¯ä»¥è®©æˆ‘ä»¬åœ¨è¿è¡Œæ—¶ç¼–è¯‘æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€åˆ›å»ºä¸€ä¸ª`Helloç»„ä»¶`ï¼š

```javascript
import { compile, h } from 'vue'

const template = `<h1>{{ greeting }} World!</h1>`

const render = compile(template)

export default {
  data() {
    return {
      greeting: 'Hello',
    }
  },
  render
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åœ¨è¿è¡Œæ—¶ç¼–è¯‘äº†æ¨¡æ¿å­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»“æœè®¾ç½®ä¸ºç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ã€‚è¿™ç§æŠ€æœ¯åœ¨éœ€è¦åŠ¨æ€ç”Ÿæˆæ¨¡æ¿çš„åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ª CMS ä¸­æ¸²æŸ“ç”¨æˆ·æä¾›çš„æ¨¡æ¿ã€‚

### æ·±å…¥ç»„ä»¶åŒ–

Vue 3åœ¨ç»„ä»¶åŒ–æ–¹é¢ä¹Ÿæœ‰å¾ˆå¤šè¿›æ­¥ï¼Œä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚

### åŠ¨æ€ç»„ä»¶

Vue 3æ”¯æŒä½¿ç”¨`component`æ ‡ç­¾æ¥åŠ¨æ€åŠ è½½ç»„ä»¶ï¼Œç»„ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç»„ä»¶çš„åå­—ã€‚è¿™ä¸ªç‰¹æ€§åœ¨æ ¹æ®ä¸åŒçš„çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚

```vue
<component :is="currentComponent"></component>

```

### å¼‚æ­¥ç»„ä»¶

Vue 3 æ”¯æŒå¼‚æ­¥ç»„ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨`defineAsyncComponent`æ–¹æ³•æ¥å®šä¹‰ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè¿”å› Promise çš„å·¥å‚å‡½æ•°ï¼ŒPromise éœ€è¦è§£æä¸ºä¸€ä¸ªç»„ä»¶ã€‚

```javascript
import { defineAsyncComponent } from 'vue'

const AsyncComponent = defineAsyncComponent(() =>
  import('./components/AsyncComponent.vue')
)

```

### é«˜é˜¶ç»„ä»¶

é«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentï¼Œç®€ç§° HOCï¼‰æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒæ˜¯æ¥æ”¶ä¸€ä¸ªç»„ä»¶å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ã€‚åœ¨ Vue 3 ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ç»„åˆå¼ API æ¥æ›´å®¹æ˜“åœ°åˆ›å»ºé«˜é˜¶ç»„ä»¶ã€‚

```javascript
import { ref } from 'vue'

export default function withHover(Component) {
  return {
    setup(props, { slots }) {
      const isHovered = ref(false)

      return () => (
        <div
          onMouseenter={() => (isHovered.value = true)}
          onMouseleave={() => (isHovered.value = false)}
        >
          <Component {...props} isHovered={isHovered.value} v-slots={slots} />
        </div>
      )
    }
  }
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`withHover` å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œæ–°çš„ç»„ä»¶æœ‰ä¸€ä¸ª `isHovered` å±æ€§ï¼Œè¡¨ç¤ºé¼ æ ‡æ˜¯å¦æ‚¬åœåœ¨ç»„ä»¶ä¸Šã€‚è¿™ç§æ¨¡å¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ä¸åŒçš„ç»„ä»¶é—´å¤ç”¨é€»è¾‘ã€‚

å…¶å®ƒç»„åˆAPI
-------

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d05799744a6341fd908ec03e5916d7b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

### computed

`computed` å‡½æ•°ç”¨äºåˆ›å»ºä¸€ä¸ªå“åº”å¼çš„è®¡ç®—å±æ€§ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ç”±æä¾›çš„ getter å‡½æ•°è®¡ç®—å¾—å‡ºï¼Œå¹¶ä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ã€‚

```javascript
import { ref, computed } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const doubleCount = computed(() => count.value * 2)

    return {
      count,
      doubleCount
    }
  }
}

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª `doubleCount` è®¡ç®—å±æ€§ï¼Œå®ƒçš„å€¼å§‹ç»ˆæ˜¯ `count` çš„ä¸¤å€ã€‚

### watch å’Œ watchEffect

`watch` å’Œ `watchEffect` å‡½æ•°ç”¨äºè§‚å¯Ÿä¸€ä¸ªæˆ–å¤šä¸ªå“åº”å¼å¼•ç”¨æˆ–å‡½æ•°ï¼Œå¹¶åœ¨å…¶å€¼æ”¹å˜æ—¶æ‰§è¡Œå‰¯ä½œç”¨ã€‚

```javascript
import { ref, watch, watchEffect } from 'vue'

export default {
  setup() {
    const count = ref(0)

    watch(count, (newCount, oldCount) => {
      console.log(`Count changed from ${oldCount} to ${newCount}`)
    })

    watchEffect(() => {
      console.log(`Count is ${count.value}`)
    })

    return {
      count
    }
  }
}

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `watch` å‡½æ•°è§‚å¯Ÿ `count`ï¼Œå¹¶åœ¨å…¶å€¼æ”¹å˜æ—¶æ‰“å°æ¶ˆæ¯ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨ `watchEffect` å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå®ƒä¼šåœ¨ `count` æ”¹å˜æ—¶ç«‹å³æ‰§è¡Œã€‚

### lifecycle hooks

åœ¨ Vue 3 ä¸­ï¼Œä½ å¯ä»¥åœ¨ `setup` å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¾‹å¦‚ `onMounted`ï¼Œ`onUpdated` å’Œ `onUnmounted`ã€‚

```javascript
import { onMounted, onUpdated, onUnmounted } from 'vue'

export default {
  setup() {
    onMounted(() => {
      console.log('Component is mounted')
    })

    onUpdated(() => {
      console.log('Component is updated')
    })

    onUnmounted(() => {
      console.log('Component is unmounted')
    })
  }
}

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶æŒ‚è½½ã€æ›´æ–°å’Œå¸è½½æ—¶æ‰“å°æ¶ˆæ¯ã€‚

è¿™äº›æ˜¯ Vue 3 ä¸­æä¾›çš„æ›´ä¸ºé«˜çº§çš„å“åº”å¼ APIï¼Œè®©æˆ‘ä»¬é€ä¸€äº†è§£å®ƒä»¬ã€‚

### shallowReactive ä¸ shallowRef

`shallowReactive` å’Œ `shallowRef` å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæµ…å±‚çš„å“åº”å¼å¯¹è±¡ã€‚å¯¹äº `shallowReactive`ï¼Œåªæœ‰å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ä¼šå˜ä¸ºå“åº”å¼çš„ï¼Œå¯¹è±¡çš„æ›´æ·±å±‚æ¬¡çš„å±æ€§ä¸ä¼šè¢«è½¬æ¢ã€‚`shallowRef` æ˜¯ `ref` çš„æµ…å±‚ç‰ˆæœ¬ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨è§£åŒ…å†…éƒ¨çš„å€¼ã€‚

```javascript
import { shallowReactive, shallowRef } from 'vue'

const obj = shallowReactive({ a: { b: 1 } })
obj.a.b 

const num = shallowRef(1)
num.value 

```

### readonly ä¸ shallowReadonly

`readonly` å’Œ `shallowReadonly` å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåªè¯»çš„å“åº”å¼å¯¹è±¡ã€‚å¯¹äº `readonly`ï¼Œå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬åµŒå¥—å±æ€§ï¼‰éƒ½ä¼šå˜ä¸ºåªè¯»ã€‚`shallowReadonly` æ˜¯ `readonly` çš„æµ…å±‚ç‰ˆæœ¬ï¼Œåªæœ‰å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ä¼šå˜ä¸ºåªè¯»ã€‚

```javascript
import { readonly, shallowReadonly } from 'vue'

const obj = readonly({ a: { b: 1 } })
obj.a = 2 

const shallowObj = shallowReadonly({ a: { b: 1 } })
shallowObj.a.b = 2 

```

### toRaw ä¸ markRaw

`toRaw` å’Œ `markRaw` å…è®¸æˆ‘ä»¬é€ƒé¿ Vue çš„å“åº”å¼ç³»ç»Ÿã€‚`toRaw` å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„åŸå§‹ç‰ˆæœ¬ï¼Œè€Œ `markRaw` å¯ä»¥é˜²æ­¢ä¸€ä¸ªå¯¹è±¡è¢«è½¬æ¢ä¸ºå“åº”å¼çš„ã€‚

```javascript
import { reactive, toRaw, markRaw } from 'vue'

const obj = reactive({ a: 1 })
const rawObj = toRaw(obj) 

const nonReactiveObj = markRaw({ a: 1 }) 

```

### customRef

`customRef` å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ refï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶å®ƒä½•æ—¶è§¦å‘ä¾èµ–è¿½è¸ªå’Œæ›´æ–°ã€‚

```javascript
import { customRef } from 'vue'

const myRef = customRef((track, trigger) => ({
  get() {
    track()
    return someValue
  },
  set(newValue) {
    someValue = newValue
    trigger()
  }
}))

```

### provide ä¸ inject

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c7f14cb3e5945c183a6b4939d9d893f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
 `provide` å’Œ `inject` æ˜¯ Vue 3 çš„ä¾èµ–æ³¨å…¥ APIï¼Œå¯ä»¥ç”¨äºåœ¨ç»„ä»¶æ ‘ä¸­ä¼ é€’å€¼ï¼Œè€Œä¸å¿…ä¸€å±‚ä¸€å±‚åœ°é€šè¿‡ props ä¼ é€’ã€‚

```javascript
import { provide, inject } from 'vue'


provide('myValue', 123)


const myValue = inject('myValue') 

```

### å“åº”å¼åˆ¤æ–­

Vue 3 æä¾›äº† `isReactive` å’Œ `isRef` å‡½æ•°ï¼Œç”¨äºæ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯å“åº”å¼çš„æˆ–è€…ä¸€ä¸ª refã€‚

```javascript
import { reactive, ref, isReactive, isRef } from 'vue'

const obj = reactive({ a: 1 })
isReactive(obj) 

const num = ref(1)
isRef(num) 

```

è¿™äº› API æä¾›äº†æ›´å¤šçš„æ§åˆ¶å’Œçµæ´»æ€§ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿæ ¹æ®éœ€è¦æ¥é€‰æ‹©å¦‚ä½•ä½¿ç”¨ Vue çš„å“åº”å¼ç³»ç»Ÿã€‚

æ·±å…¥å“åº”å¼ç³»ç»Ÿ
-------

Vue 3 çš„å“åº”å¼ç³»ç»Ÿæ„å»ºåœ¨ä¸€ä¸ªåä¸º `effect` çš„å‡½æ•°åŸºç¡€ä¹‹ä¸Šï¼Œå®ƒè¢«ç”¨æ¥æ”¶é›†ä¾èµ–é¡¹ï¼ˆä¾èµ–è¿½è¸ªï¼‰å’Œè§¦å‘å‰¯ä½œç”¨ã€‚å½“ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„å±æ€§è¢«è®¿é—®æ—¶ï¼Œ`effect` å°†å…¶æ”¶é›†ä¸ºä¾èµ–é¡¹ï¼›å½“ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„å±æ€§è¢«ä¿®æ”¹æ—¶ï¼Œå®ƒå°†è§¦å‘å…³è”çš„å‰¯ä½œç”¨ã€‚

### effectã€reactiveã€ref

`reactive` å’Œ `ref` æ˜¯ Vue 3 çš„ä¸¤ç§åŸºæœ¬å“åº”å¼ APIã€‚å®ƒä»¬éƒ½ä½¿ç”¨ `effect` æ¥è·Ÿè¸ªä¾èµ–é¡¹å’Œè§¦å‘æ›´æ–°ã€‚

```javascript
import { effect, reactive, ref } from 'vue'


const state = reactive({ a: 1 })

effect(() => {
  console.log(state.a)
})

state.a = 2 


const count = ref(0)

effect(() => {
  console.log(count.value)
})

count.value++ 

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå“åº”å¼å¯¹è±¡å’Œä¸€ä¸ª refï¼Œç„¶åä½¿ç”¨ `effect` åˆ›å»ºäº†ä¸¤ä¸ªå‰¯ä½œç”¨ï¼Œå®ƒä»¬åˆ†åˆ«æ‰“å°å‡ºå¯¹è±¡å’Œ ref çš„å€¼ã€‚å½“è¿™äº›å€¼è¢«æ”¹å˜æ—¶ï¼Œå‰¯ä½œç”¨å°±ä¼šè¢«è§¦å‘ã€‚

### trackã€trigger

`track` å’Œ `trigger` æ˜¯ Vue 3 çš„åº•å±‚ APIï¼Œå®ƒä»¬åˆ†åˆ«è¢«ç”¨æ¥æ”¶é›†ä¾èµ–é¡¹å’Œè§¦å‘æ›´æ–°ã€‚

```javascript
import { reactive, effect, track, trigger } from 'vue'

const state = reactive({ a: 1 })

effect(() => {
  
  track(state, 'a')
  console.log(state.a)
})

state.a = 2 


trigger(state, 'a')

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `track` æ‰‹åŠ¨æ”¶é›†äº† `state.a` ä½œä¸ºä¾èµ–é¡¹ï¼Œç„¶åä½¿ç”¨ `trigger` æ‰‹åŠ¨è§¦å‘äº†æ›´æ–°ã€‚

### åµŒå¥—ç»“æ„å¤„ç†

Vue 3 çš„å“åº”å¼ç³»ç»Ÿå¯ä»¥å¤„ç†åµŒå¥—çš„å“åº”å¼å¯¹è±¡ã€‚

```javascript
import { reactive, effect } from 'vue'

const state = reactive({
  user: {
    name: 'Alice'
  }
})

effect(() => {
  console.log(state.user.name)
})

state.user.name = 'Bob' 

```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåµŒå¥—çš„å“åº”å¼å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ `effect` åˆ›å»ºäº†ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå®ƒæ‰“å°å‡ºç”¨æˆ·çš„åå­—ã€‚å½“ç”¨æˆ·çš„åå­—è¢«æ”¹å˜æ—¶ï¼Œå‰¯ä½œç”¨å°±ä¼šè¢«è§¦å‘ã€‚

Render å‡½æ•°
---------

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/adb7b08090dc443587709e30abd5ad41~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)
 åœ¨ Vue 3 ä¸­ï¼ŒRender å‡½æ•°æ˜¯ä¸€ç§æä¾›äº†æ›´å¤§çµæ´»æ€§çš„é«˜çº§åŠŸèƒ½ã€‚è™½ç„¶ Vue çš„æ¨¡æ¿ç³»ç»Ÿå·²ç»è¶³å¤Ÿå¼ºå¤§ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨ JavaScript ç¼–å†™æ¸²æŸ“é€»è¾‘ä¼šæ›´åŠ æ–¹ä¾¿ã€‚

Render å‡½æ•°çš„å·¥ä½œåŸç†æ˜¯é€šè¿‡è¿”å›ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼ˆVNodeï¼‰æ¥å‘Šè¯‰ Vue å¦‚ä½•æ¸²æŸ“ç•Œé¢ã€‚Vue 3 æä¾›äº† `h` å‡½æ•°ç”¨äºåˆ›å»º VNodeã€‚

```javascript
import { h } from 'vue'

export default {
  render() {
    return h('div', {}, 'Hello, world!')
  }
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `h` å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª `div` å…ƒç´ ï¼Œç„¶ååœ¨ Render å‡½æ•°ä¸­è¿”å›å®ƒã€‚

### ç¼–è¯‘ä¼˜åŒ–

> å‚è€ƒä¸Šä¸€ç« èŠ‚

Vue 3 çš„ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶åšäº†è®¸å¤šä¼˜åŒ–ï¼Œä¾‹å¦‚é™æ€èŠ‚ç‚¹æå‡å’ŒåŠ¨æ€èŠ‚ç‚¹ç»‘å®šï¼Œä»è€Œåœ¨è¿è¡Œæ—¶å‡å°‘äº†ä¸å¿…è¦çš„å·¥ä½œã€‚é™æ€èŠ‚ç‚¹æå‡å¯ä»¥å°†ä¸ä¼šæ”¹å˜çš„èŠ‚ç‚¹ä»æ¸²æŸ“å‡½æ•°ä¸­æå–å‡ºæ¥ï¼Œä»è€Œé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚åŠ¨æ€èŠ‚ç‚¹ç»‘å®šåˆ™æ˜¯å¯¹é‚£äº›å¯èƒ½æ”¹å˜çš„èŠ‚ç‚¹è¿›è¡Œä¼˜åŒ–ï¼Œåªæœ‰å½“è¿™äº›èŠ‚ç‚¹çš„ç»‘å®šå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ¸²æŸ“èŠ‚ç‚¹ã€‚

### æ‰‹åŠ¨ç¼–å†™æ¸²æŸ“é€»è¾‘

æœ‰æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ‰‹åŠ¨ç¼–å†™æ¸²æŸ“é€»è¾‘ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸€ç»„æ•°æ®åŠ¨æ€ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Render å‡½æ•°ä¸­ä½¿ç”¨ JavaScript çš„æ•°ç»„æ–¹æ³•ã€‚

```javascript
import { h } from 'vue'

export default {
  data() {
    return {
      items: ['Apple', 'Banana', 'Cherry']
    }
  },
  render() {
    return h('div', {}, this.items.map(item => h('div', {}, item)))
  }
}

```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `map` æ–¹æ³•åŠ¨æ€ç”Ÿæˆäº†ä¸€ä¸ªåˆ—è¡¨çš„å…ƒç´ ï¼Œç„¶ååœ¨ Render å‡½æ•°ä¸­è¿”å›å®ƒã€‚

Render å‡½æ•°æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥æ§åˆ¶ Vue åº”ç”¨çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæ›´å¥½åœ°æ§åˆ¶å’Œä¼˜åŒ–åº”ç”¨çš„æ€§èƒ½ã€‚

vueç”Ÿæ€é…å¥—
-------

### çŠ¶æ€ç®¡ç†

Pinia æ˜¯ Vue 3 æä¾›çš„ä¸€ç§æ–°å‹çŠ¶æ€ç®¡ç†åº“ï¼Œå®ƒæä¾›äº† Vuex çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä½†åœ¨ API è®¾è®¡ä¸Šæ›´åŠ ç®€æ´ä¸”æ˜“ç”¨ã€‚

Pinia çš„ä¸»è¦ä¼˜ç‚¹åŒ…æ‹¬ï¼š

1.  å®ƒæœ‰æ›´ç®€æ´çš„ APIï¼Œå‡å°‘äº†æ¨¡æ¿ä»£ç çš„æ•°é‡ã€‚
2.  å®ƒé€šè¿‡ TypeScript æä¾›äº†æ›´å¥½çš„ç±»å‹æ”¯æŒã€‚
3.  å®ƒæä¾›äº†åŸºäºç»„ä»¶çš„çŠ¶æ€å­˜å‚¨ï¼Œåªåœ¨éœ€è¦æ—¶åŠ è½½çŠ¶æ€ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ª Pinia ä½¿ç”¨ç¤ºä¾‹ï¼š

é¦–å…ˆï¼Œå®‰è£… Piniaï¼š

```bash
npm install pinia

```

ç„¶åï¼Œåˆ›å»ºä¸€ä¸ª Pinia storeï¼š

```javascript

import { defineStore } from 'pinia'

export const useCounterStore = defineStore({
  id: 'counter',
  state: () => ({ count: 0 }),
  actions: {
    increment() {
      this.count++
    }
  }
})

```

ç„¶åï¼Œåœ¨ä½ çš„ main.js æˆ– main.ts æ–‡ä»¶ä¸­åˆ›å»º Pinia æ’ä»¶ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä½ çš„ Vue åº”ç”¨ä¸­ï¼š

```javascript
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import App from './App.vue'

const app = createApp(App)

app.use(createPinia())
app.mount('#app')

```

ç„¶åï¼Œä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨è¯¥ storeï¼š

```vue
<template>
  <button @click="increment">{{ count }}</button>
</template>

<script>
import { useCounterStore } from '@/stores/counter'

export default {
  setup() {
    const counter = useCounterStore()

    return {
      count: counter.count,
      increment: counter.increment
    }
  }
}
</script>

```

ä»¥ä¸Šå°±æ˜¯ Pinia çš„åŸºæœ¬ç”¨æ³•ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´ç®€æ´ã€æ›´çµæ´»çš„æ–¹å¼æ¥ç®¡ç† Vue åº”ç”¨çš„çŠ¶æ€ã€‚

### è·¯ç”±ç®¡ç† \- Vue Router

Vue Router æ˜¯ Vue.js çš„è·¯ç”±åº“ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ„å»ºå•é¡µé¢åº”ç”¨ç¨‹åºï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­æ‰€ç¤ºï¼š

é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª routerï¼š

```javascript
import { createRouter, createWebHistory } from 'vue-router'
import Home from './components/Home.vue'
import About from './components/About.vue'

const router = createRouter({
  history: createWebHistory(),
  routes: [
    { path: '/', component: Home },
    { path: '/about', component: About }
  ]
})

```

ç„¶åï¼Œåœ¨ Vue åº”ç”¨ä¸­ä½¿ç”¨è¿™ä¸ª routerï¼š

```javascript
import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

createApp(App).use(router).mount('#app')

```

æœ€åï¼Œåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ `<router-link>` å’Œ `<router-view>` æ¥å¯¼èˆªå’Œæ¸²æŸ“è·¯ç”±ï¼š

```vue
<template>
  <router-link to="/">Home</router-link>
  <router-link to="/about">About</router-link>
  <router-view></router-view>
</template>

```

### UI æ¡†æ¶ - Element UI

Element UI æ˜¯ä¸€ä¸ªä¸º Vue.js å¼€å‘çš„ UI æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€å¥—ä¸°å¯Œå¤šæ ·çš„ç»„ä»¶ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å®¹æ˜“åœ°æ„å»ºå‡ºæ¼‚äº®çš„ç•Œé¢ï¼š

```vue
<template>
  <el-button type="primary">ä¸»è¦æŒ‰é’®</el-button>
  <el-button type="success">æˆåŠŸæŒ‰é’®</el-button>
  <el-button type="warning">è­¦å‘ŠæŒ‰é’®</el-button>
</template>

```

### æµ‹è¯•æ–¹æ¡ˆ \- Vitest

Vitest æ˜¯ä¸€ä¸ªç”± Vite æä¾›æ”¯æŒçš„æé€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚

```javascript
import { assert, describe, it } from 'vitest'

describe.skip('skipped suite', () => {
  it('test', () => {
    
    assert.equal(Math.sqrt(4), 3)
  })
})

describe('suite', () => {
  it.skip('skipped test', () => {
    
    assert.equal(Math.sqrt(4), 3)
  })
})

```

å…¶ä»–æ”¹å˜
----

åœ¨ Vue 3 ä¸­ï¼Œå¼€å‘è€…ä¼šæ³¨æ„åˆ°ä¸€äº›é‡è¦çš„å˜åŒ–ï¼Œä¸»è¦ä½“ç°åœ¨å…¨å±€ API çš„è½¬ç§»ç­‰ï¼Œä»¥åŠå¯¹ TypeScript çš„æ›´å¥½æ”¯æŒä¸Šã€‚

### å…¨å±€ API è½¬ç§»

åœ¨ Vue 3 ä¸­ï¼Œä¸€äº›å…¨å±€ API å·²ç»è¢«è½¬ç§»åˆ°äº† `globalProperties` ä¸Šï¼Œä¾‹å¦‚ `Vue.prototype` åœ¨ Vue 3 ä¸­å˜æˆäº† `app.config.globalProperties`ã€‚è¿™æ ·åšæ˜¯ä¸ºäº†æ›´å¥½åœ°éš”ç¦»å…¨å±€ APIï¼Œå¹¶ä¸ºæœªæ¥å¯èƒ½çš„æ›´æ”¹æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚

ä¾‹å¦‚ï¼ŒåŸæœ¬åœ¨ Vue 2 ä¸­æˆ‘ä»¬å¯èƒ½ä¼šè¿™æ ·æ·»åŠ ä¸€ä¸ªå…¨å±€çš„æ–¹æ³•ï¼š

```javascript
Vue.prototype.$myGlobalMethod = function () {
  return 'Hello World!'
}

```

åœ¨ Vue 3 ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·åšï¼š

```javascript
const app = createApp(App)
app.config.globalProperties.$myGlobalMethod = function () {
  return 'Hello World!'
}

```

ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼š

```javascript
this.$myGlobalMethod()

```

### åˆ é™¤çš„ API

Vue 3 ä¸ºäº†ç®€åŒ–æ¡†æ¶å¹¶é¿å…æœªæ¥çš„ç»´æŠ¤è´Ÿæ‹…ï¼Œåˆ é™¤äº†ä¸€äº›åœ¨ Vue 2 ä¸­å·²ç»è¢«åºŸå¼ƒçš„ APIï¼Œä¾‹å¦‚ `Vue.set`ã€`Vue.delete` å’Œ `Vue.observable`ã€‚

### TypeScript æ”¯æŒ

Vue 3 ä»ä¸€å¼€å§‹å°±åœ¨å†…éƒ¨ä½¿ç”¨äº† TypeScript é‡å†™ï¼Œå› æ­¤åœ¨ TypeScript çš„æ”¯æŒä¸Šæœ‰äº†æ˜¾è‘—çš„æå‡ã€‚è¿™åŒ…æ‹¬æ›´å¥½çš„ç±»å‹æ¨æ–­ã€è‡ªåŠ¨è¡¥å…¨ï¼Œä»¥åŠæ›´å¼ºå¤§çš„ç±»å‹å®‰å…¨æ€§ã€‚

ä¾‹å¦‚ï¼Œåœ¨ Vue 2 ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä½¿ç”¨ Vue.extend() æˆ–è€… `@Component` è£…é¥°å™¨æ¥ç¡®ä¿ TypeScript ç±»å‹æ­£ç¡®ï¼Œä½†åœ¨ Vue 3 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ `defineComponent` æ–¹æ³•ï¼Œå®ƒèƒ½æ­£ç¡®åœ°æ¨æ–­å‡ºç»„ä»¶çš„ç±»å‹ï¼š

```typescript
import { defineComponent } from 'vue'

export default defineComponent({
  
})

```