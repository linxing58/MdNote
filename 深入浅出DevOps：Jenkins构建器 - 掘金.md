# æ·±å…¥æµ…å‡ºDevOpsï¼šJenkinsæ„å»ºå™¨ - æ˜é‡‘
æˆ‘æŠ¥åå‚åŠ é‡‘çŸ³è®¡åˆ’1æœŸæŒ‘æˆ˜â€”â€”ç“œåˆ†10ä¸‡å¥–æ± ï¼Œè¿™æ˜¯æˆ‘çš„ç¬¬4ç¯‡æ–‡ç« ï¼Œ[ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…](https://s.juejin.cn/ds/jooSN7t "https://s.juejin.cn/ds/jooSN7t")

> ğŸ’¯ ä½œè€…ï¼š **ä¿—ä¸–æ¸¸å­**ã€è°¢å…ˆç”Ÿã€‘ã€‚ 8å¹´å¼€å‘3å¹´æ¶æ„ã€‚ä¸“æ³¨äºJavaã€äº‘åŸç”Ÿã€å¤§æ•°æ®ç­‰é¢†åŸŸæŠ€æœ¯ã€‚  
> ğŸ’¥ æˆå°±ï¼š ä»CRUDå…¥è¡Œï¼Œè´Ÿè´£è¿‡äº¿çº§æµé‡æ¶æ„çš„è®¾è®¡å’Œè½åœ°ï¼Œè§£å†³äº†åƒä¸‡çº§æ•°æ®æ²»ç†é—®é¢˜ã€‚  
> ğŸ“– åŒåç¤¾åŒºï¼š[æ˜é‡‘](https://juejin.cn/user/3359725700263694 "https://juejin.cn/user/3359725700263694")â€‹ã€â€‹[â€‹githubâ€‹](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxiezhyan "https://github.com/xiezhyan")â€‹â€‹ã€â€‹[â€‹51CTOâ€‹](https://link.juejin.cn/?target=https%3A%2F%2Fblog.51cto.com%2Fu_14948012 "https://blog.51cto.com/u_14948012")â€‹ã€â€‹[â€‹giteeâ€‹](https://link.juejin.cn/?target=https%3A%2F%2Fgitee.com%2Fmr_sanq "https://gitee.com/mr_sanq")â€‹â€‹  
> ğŸ“‚ æ¸…å•ï¼š â€‹â€‹[â€‹goku-frameworkâ€‹](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxiezhyan%2Fgoku-framework "https://github.com/xiezhyan/goku-framework")â€‹â€‹ã€â€‹[â€‹ã€æ›´æ–°ä¸­ã€‘äº«é˜…è¯»IIâ€‹](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fxiezhyan%2Fenjoy-read-ii "https://github.com/xiezhyan/enjoy-read-ii")â€‹

[æ·±å…¥æµ…å‡ºDevOpsï¼šDevOpsæ ¸å¿ƒæ€æƒ³](https://juejin.cn/post/7134696448616038414 "https://juejin.cn/post/7134696448616038414")

[æ·±å…¥æµ…å‡ºDevOpsï¼šç‰ˆæœ¬æ§åˆ¶Git&Gitlab](https://juejin.cn/post/7135949075387514894 "https://juejin.cn/post/7135949075387514894")

[æ·±å…¥æµ…å‡ºDevOpsï¼šæŒç»­é›†æˆå·¥å…·Jenkins](https://juejin.cn/post/7137300017152262151 "https://juejin.cn/post/7137300017152262151")

[æ·±å…¥æµ…å‡ºDevOpsï¼šç®€æ˜“Dockerå…¥é—¨](https://juejin.cn/post/7137666687872008205 "https://juejin.cn/post/7137666687872008205")

[æ·±å…¥æµ…å‡ºDevOpsï¼šJenkinså®æˆ˜ä¹‹CI](https://juejin.cn/post/7139406386911248414 "https://juejin.cn/post/7139406386911248414")

[æ·±å…¥æµ…å‡ºDevOpsï¼šSonarQubeæå‡ä»£ç è´¨é‡](https://juejin.cn/post/7140608660006240270 "https://juejin.cn/post/7140608660006240270")

[æ·±å…¥æµ…å‡ºDevOpsï¼šSonarQubeæå‡ä»£ç è´¨é‡ã€ä¸‹ã€‘](https://juejin.cn/post/7142440715421745165 "https://juejin.cn/post/7142440715421745165")

å‰è¨€
--

æˆ‘ä»¬ä»å¼€å§‹å­¦ä¹ Jenkinsåˆ°ç°åœ¨ï¼Œå¤§å®¶è‚¯å®šå·²ç»å°è¯•äº†å¾ˆå¤šæ¬¡æ„å»ºé¡¹ç›®çš„è¿‡ç¨‹

ä½†å…¶å®æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¤§å®¶åœ¨æ„å»ºçš„æ—¶å€™æ˜¯ä¸æ˜¯è§‰å¾—ç›®å‰çš„æ„å»ºæ–¹å¼æ¯”è¾ƒç¹çï¼š

*   æ‰“å¼€æµè§ˆå™¨ï¼Œè¿›å…¥åˆ°Jenkins
*   åœ¨Jenkinsä¸­æ‰¾åˆ°å¯¹åº”çš„ä»»åŠ¡
*   ç„¶åç‚¹å‡»ç«‹å³æ„å»º

è¿™æ ·æ‰èƒ½å¼€å§‹æ„å»ºå½“å‰ä»»åŠ¡ï¼Œä½†æ˜¯å¦‚æœæœ‰è¿™æ ·ä¸€ç§æ–¹å¼ï¼Œä¸éœ€è¦ä¸Šè¿°ç¹ççš„è¿‡ç¨‹ï¼Œæ˜¯ä¸æ˜¯ä¼šæ¯”è¾ƒèˆ’æœå‘¢ï¼š

*   Jenkinsèƒ½å¤Ÿè‡ªå·±å»GitLabä¸Šæ‹‰å–ä»£ç ï¼Œæ‹‰å–åˆ°ä»£ç ä¹‹åè‡ªåŠ¨æ‰§è¡Œåç»­è„šæœ¬è¿›è¡Œæ„å»ºï¼›
*   æˆ–è€…è¯´å½“æˆ‘ä»¬å°†ä»£ç æäº¤åˆ°GitLabä¸Šä¹‹åï¼ŒJenkinsé€šè¿‡æŸç§æ–¹å¼å¾—åˆ°é€šçŸ¥ç„¶åå°±èƒ½æ‰§è¡Œæ„å»ºã€‚

åˆ«è¯´ï¼Œè¿™æ ·æƒ³æƒ³éƒ½æŒºå¼€å¿ƒçš„å¯¹ä¸å¯¹

åˆ«æ€¥ï¼ŒåŠŸèƒ½å¼ºå¤§çš„Jenkinsæ—©å°±ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†ä¸€åˆ‡ã€‚è¿™ä¸å°±è¦è·Ÿå¤§å®¶ä»‹ç»å…³äºJenkinsçš„å¦ä¸€å¤§ä¾¿æ·çš„åŠŸèƒ½ï¼Œå®¹æˆ‘å–ä¸ªå…³å­ï¼Œå¤§å®¶ç»§ç»­å¾€ä¸‹çœ‹

æ„å»ºè§¦å‘å™¨
-----

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/02912b29b6894fbfbfc39fadb57c8806~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

è§¦å‘å™¨æ˜¯ä»»åŠ¡é…ç½®ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œå®ƒå®ç°äº†æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä¸€åˆ‡è®¾æƒ³ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å¥½å¥½èŠä¸€èŠè¿™ä¸ªè§¦å‘å™¨

> æˆ‘ä»¬æŒ‘å‡ ç§æ¯”è¾ƒå¸¸ç”¨çš„è§¦å‘å™¨æ¥ä»‹ç»

### å…¶ä»–å·¥ç¨‹æ„å»ºåè§¦å‘

å¦‚æœæˆ‘ä»¬çš„é¡¹ç›®éœ€è¦ä¾èµ–å…¶ä»–é¡¹ç›®æ‰èƒ½æ­£å¸¸æ‰§è¡Œï¼Œæ­¤æ—¶åœ¨æ„å»ºçš„æ—¶å€™å°±æœ‰ä¸€ä¸ªå…ˆåé¡ºåºï¼Œæˆ‘ä»¬åŸºäºè¯¥è§¦å‘å™¨ä¸‹çš„é…ç½®é¡¹è¿›è¡Œæ„å»ºé¡¹ç›®ï¼Œæ ¹æ®æˆ‘ä»¬æ‰€è®¾ç½®çš„å…³æ³¨é¡¹ç›®ï¼Œæœ€ç»ˆåœ¨æ„å»ºçš„æ—¶å€™ä¼šå½¢æˆç±»ä¼¼è´£ä»»é“¾æ¨¡å¼çš„é•¿é“¾

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1cf82bf31fdb4df083fd12dafd8d5215~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

> è¿™ç§æ–¹å¼éå¸¸ç®€å•ï¼Œå°±ä¸å¤šä»‹ç»

### å®šæ—¶æ„å»º

å®šæ—¶æ„å»ºï¼Œå¦‚å…¶åå°±æ˜¯è¯´Jenkinsæä¾›ç±»ä¼¼cronç‰¹æ€§çš„æ–¹å¼æ¥å®šæœŸæ‰§è¡Œæ„å»ºé¡¹ç›®ã€‚

è¿™ç§æ–¹å¼æˆ‘ä»¬éœ€è¦ç»“åˆå…¬å¸å®é™…ä¸šåŠ¡æ€è€ƒï¼Œå¦‚æœå…¬å¸æ˜¯ä¹ æƒ¯äºåƒæ¯æ™š/æ¯å‘¨è¿™æ ·å®šæœŸå®‰æ’æ„å»ºçš„ï¼Œé‚£ä¹ˆéå¸¸é€‚åˆé‡‡ç”¨å®šæ—¶æ„å»ºçš„è§¦å‘å™¨ï¼Œå¦åˆ™å°±éœ€è¦æ…é‡

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a769979015864370829ac3d3a70fa6f5~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

åœ¨æ˜¾ç¤ºå‡ºæ¥çš„æ—¥ç¨‹è¡¨çš„å†™å…¥Jenkinsæ”¯æŒçš„å®šæ—¶è¡¨è¾¾å¼ï¼ŒJenkinsä¼šæ ¹æ®è¡¨è¾¾å¼è‡ªåŠ¨ç»™ä¸ªæç¤ºï¼Œæ˜¾ç¤ºå‡ºä¸‹æ¬¡è¿è¡Œæ—¶é—´ï¼Œè€Œå…³äºå®šæ—¶è¡¨è¾¾å¼çš„ç›¸å…³å†…å®¹ï¼Œæˆ‘ä»¬ç»§ç»­å¾€ä¸‹çœ‹

#### å®šæ—¶è¡¨è¾¾å¼

##### åŸºæœ¬ä¿¡æ¯

```sql
MINUTE HOUR DOM MONTH DOW

```

å…·ä½“æ¥è¯´ï¼Œæ¯ä¸€è¡Œç”± 5 ä¸ªå­—æ®µç»„æˆï¼Œç”± TAB æˆ–ç©ºæ ¼åˆ†éš”ï¼Œå…¶ä¸­è¡¨ç¤ºï¼š

*   **MINUTE**

ä¸€å°æ—¶å†…çš„åˆ†é’Ÿæ•° (0â€“59)

*   **HOUR**

ä¸€å¤©ä¸­çš„å°æ—¶ (0â€“23)

*   **DOM**

æœˆä»½ä¸­çš„æŸå¤© (1â€“31)

*   **MONTH**

æœˆä»½ (1â€“12)

*   **DOW**

æ˜ŸæœŸ(0â€“7)ï¼Œå…¶ä¸­ 0 å’Œ 7 æ˜¯æ˜ŸæœŸæ—¥

è€Œè¿™é‡Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼š**H**

è¿™æ˜¯ä¸€ä¸ªè´Ÿè½½å‚æ•°ï¼Œå¯ä»¥ä»»åŠ¡æ˜¯ä½œä¸šåç§°çš„æ•£åˆ—ï¼Œç†è®ºä¸Šå¯ä»¥æ”¾åˆ°ä»»æ„ä½ç½®ä¸Šï¼Œä¸€èˆ¬åœ¨**MINUTE**æˆ–è€…**HOUR**çš„å‰é¢åŠ ä¸Š`â€‹Hâ€‹`â€‹è¿™ä¸ªå‚æ•°ã€‚ä¿è¯å®šæ—¶è°ƒåº¦ä»»åŠ¡åœ¨ç³»ç»Ÿä¸Šäº§ç”Ÿè´Ÿè½½ï¼Œè¿™æ ·èƒ½å¤Ÿä½¿ä»»åŠ¡ä¸ä¼šå‡ºç°åœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤§é™åº¦çš„ä½¿ç”¨æœåŠ¡èµ„æºã€‚

```markdown
# æ¯éš”15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
H/15 * * * *

```

##### è¿›é˜¶

é™¤äº†è¿™ç§å›ºå®šçš„æ—¶é—´ä¹‹å¤–ï¼ŒJenkinsæä¾›çš„å®šæ—¶è¡¨è¾¾å¼è¿˜æä¾›äº†èŒƒå›´åŒºé—´ï¼š

1.  â€‹`â€‹*â€‹`â€‹æŒ‡å®šæ‰€æœ‰æœ‰æ•ˆå€¼ï¼Œè¿™å°±ä¸å¤šè¯´äº†ï¼Œåœ¨cronä¸­ç»å¸¸è§åˆ°
2.  â€‹â€‹`â€‹M-Nâ€‹`â€‹æŒ‡å®šå€¼çš„èŒƒå›´

```markdown
# æ¯å¤©1~2ç‚¹ï¼Œæ¯éš”15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
H/15 H(1-2) * * * 

```

3.  â€‹`â€‹M-N/Xâ€‹`â€‹æˆ–â€‹`â€‹*/Xâ€‹`â€‹åœ¨æŒ‡å®šèŒƒå›´æˆ–æ•´ä¸ªæœ‰æ•ˆèŒƒå›´å†…æŒ‰ X çš„é—´éš”æ­¥è¿›
4.  â€‹`â€‹A,B,...,Zâ€‹`â€‹æšä¸¾å¤šä¸ªå€¼

> æ‰¾å‡ ä¸ªä¾‹å­è®©å¤§å®¶æ‰¾æ‰¾æ„Ÿè§‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨Jenkinsä¸­è¿›è¡Œæµ‹è¯•

```markdown
# åœ¨5ï¼Œ10,15åˆ†çš„æ—¶å€™æ‰§è¡Œ
5,10,15 * * * * 

# å·¥ä½œæ—¥çš„0ç‚¹ï¼Œ3ç‚¹ï¼Œ6ç‚¹ï¼Œæ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
H/10 0,3,6 * * 1-5 

```

#### ä»»åŠ¡æ„å»º

æ¥ä¸‹æ¥æˆ‘ä»¬å°±è®©æˆ‘ä»¬çš„ä»»åŠ¡å®šæ—¶æ„å»ºä¸€æ¬¡å°±æ¯éš”2åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡

> Qï¼šä¸ºå•¥ä¸æ¯éš”ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Ÿ  
> Aï¼šå¤§æ¦‚Jenkinsè§‰å¾—ä½ ä»¬å¤ªè°ƒçš®äº†ï¼Œä¸æ”¯æŒ1åˆ†é’Ÿçš„è°ƒç”¨

```markdown
H/2 * * * *

```

å‡†æ—¶æ„å»ºï¼Œé‚£ä¹ˆåœ¨å®é™…ä¸‹æ ¹æ®è‡ªèº«éœ€è¦ï¼Œåˆç†é€‰æ‹©è¡¨è¾¾å¼è¿›è¡Œæ„å»ºæ“ä½œ

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21e9d4bf8a7a4845aa9a3d37ee040804~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

> æˆ‘è¿™é‡Œç•™äº†ä¸€ä¸ªé…ç½®ï¼Œè®©å®ƒåœ¨é›¶ç‚¹æ‰§è¡Œï¼šâ€‹`â€‹H(0-1)/1 0 * * *â€‹`â€‹æ¥ä¸‹æ¥æ‹­ç›®ä»¥å¾…

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1a8f1e9226847049932ac4a7e7a19e5~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

### GitLab webhook

#### é¢å¤–è¯´æ˜

è¿™é‡Œå…ˆæ’ä¸€å¥ï¼Œåœ¨Jenkinsæ„å»ºå™¨ä¸­å…³äºGitLab webhookçš„æ–¹å¼

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2617cf37ae2345eb804cc4b13760e338~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸ä¼šå‡ºç°è¿™ä¸€é€‰é¡¹çš„ï¼Œéœ€è¦é¢å¤–å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼Œè™½ç„¶åœ¨ä¹‹å‰ä¹Ÿæåˆ°è¿‡ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æ˜¯è¦å¤šè¯´ä¸€å¥ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6bbf9329818741109230793c397158b9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

åœ¨æ’ä»¶ç®¡ç†ä¸­éœ€è¦å…ˆå°†**GitLab Plugin**æ’ä»¶å®‰è£…ä¸Šï¼ŒæˆåŠŸä¹‹åæ‰èƒ½ä½¿ç”¨webhookçš„æ–¹å¼æ¥è§¦å‘æ„å»º

#### Webhooks

ç©¿æ’äº†ä¸€ä¸ªå…³é”®ç‚¹ä¹‹åï¼Œæˆ‘ä»¬ç»§ç»­ä»‹ç»Webhooks

> ç»´åŸºç™¾ç§‘ï¼š  
> åœ¨webå¼€å‘è¿‡ç¨‹ä¸­çš„webhookï¼Œæ˜¯ä¸€ç§é€šè¿‡é€šå¸¸çš„callbackï¼Œå»å¢åŠ æˆ–è€…æ”¹å˜web pageæˆ–è€…web appè¡Œä¸ºçš„æ–¹æ³•ã€‚  
> è¿™äº›callbackå¯ä»¥ç”±ç¬¬ä¸‰æ–¹ç”¨æˆ·å’Œå¼€å‘è€…ç»´æŒå½“å‰ï¼Œä¿®æ”¹ï¼Œç®¡ç†ï¼Œè€Œè¿™äº›ä½¿ç”¨è€…ä¸ç½‘ç«™æˆ–è€…åº”ç”¨çš„åŸå§‹å¼€å‘æ²¡æœ‰å…³è”

ç»“åˆJenkinsæ¥ä»‹ç»ï¼š

*   å½“æˆ‘ä»¬å¯¹GitLabä»“åº“è¿›è¡Œæ“ä½œï¼ˆæäº¤ä»£ç ï¼Œåˆå¹¶åˆ†æ”¯ï¼‰ä¹‹åï¼ŒGitLabä¼šå‘å¯¹åº”é…ç½®çš„æ¥å£ä¸­å‘é€httpè¯·æ±‚ï¼ŒJenkinsæ¥æ”¶åˆ°è¯·æ±‚ä¹‹åä¼šå¯¹å½“å‰é¡¹ç›®ä½œå‡ºæ„å»ºçš„æ“ä½œã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿå®ç°è‡ªåŠ¨åŒ–CIæ“ä½œï¼Œå‡å°‘éƒ¨ç½²æˆæœ¬

\\

#### å®æ“ï¼šåŸºäºGitLabçš„Webhookså®ç°è‡ªåŠ¨åŒ–æ„å»º

é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¼€å§‹é…ç½®Webhooksï¼Œå®ç°è‡ªåŠ¨åŒ–æ„å»ºä»»åŠ¡å§

##### GitLabé…ç½®ï¼šæœ¬åœ°å‡ºç«™è¯·æ±‚

é¦–å…ˆï¼Œç”±äºGitLabç‰ˆæœ¬çš„å‡çº§ï¼Œä¼šé™åˆ¶æœ¬åœ°çš„å‡ºç«™è¯·æ±‚ï¼Œç”±äºæœ¬äººåœ¨æ­å»ºç¯å¢ƒçš„æ—¶å€™å°†Jenkinså’ŒGitLabæ”¾åˆ°äº†åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥éœ€è¦å…ˆåœ¨GitLabä¸Šå¯¹å‡ºç«™è¯·æ±‚è¿›è¡Œé…ç½®

> å¦‚æœç¯å¢ƒåœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸€æ­¥å¯ä»¥çœç•¥

å½“å‰é…ç½®åœ¨GitLabä½äº â€‹`â€‹Menu>Admin>Settings>Network>â€‹`â€‹â€‹`â€‹Outbound requestsâ€‹`â€‹ä¸‹

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c8b1724ae149438dac8872d399f17565~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

å‹¾é€‰å›¾ä¸­çš„ä¸¤ä¸ªé€‰é¡¹æ¡†æˆ–è€…åœ¨ä¸‹æ–¹çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥æœ¬åœ°IPå’ŒåŸŸåéƒ½æ˜¯å¯ä»¥çš„

> ä¸ºäº†æ–¹ä¾¿æˆ‘å°±å‹¾é€‰äº†

##### Jenkins 503é…ç½®

ç”±äºJenkinså¼€å¯äº†GitLabçš„èº«ä»½éªŒè¯ï¼Œæ­¤æ—¶å¦‚æœç›´æ¥åœ¨GitLabä¸Šæ·»åŠ Webhooksçš„è¯ï¼Œæ— æ³•æ­£ç¡®è¢«å¤„ç†ã€‚

è¿™é‡Œå°±éœ€è¦è¿›å…¥åˆ°Jenkinsçš„ â€‹`â€‹ç³»ç»Ÿç®¡ç†>ç³»ç»Ÿé…ç½®â€‹`â€‹ï¼Œæ‰¾åˆ°**Gitlab**çš„ä½ç½®ï¼Œå¹¶ä¸”å»æ‰â€‹`â€‹Enable authentication for '/project' end-pointâ€‹`â€‹çš„å‹¾é€‰

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e70be4a703543f0ad67f5144bb568a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

##### Jenkinsé¡¹ç›®é…ç½®è§¦å‘å™¨

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6d5fa550cdc148d6a167e7f4c5a933b4~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

è¿›å…¥åˆ°é¡¹ç›®é…ç½®é¡µé¢ä¸­ï¼Œå‹¾é€‰å›¾ä¸­æ¡†ä½çš„é€‰é¡¹ï¼Œå¹¶å¤åˆ¶æœ€åçš„URLåœ°å€

##### GitLabè®¾ç½®Webhooks

è¿›å…¥åˆ° GitLabä¸Šè¯¥é¡¹ç›®é¡µé¢ï¼Œä»â€‹`â€‹settings>Webhooksâ€‹`â€‹æ‰¾åˆ°å¯¹åº”çš„é…ç½®é¡µé¢ï¼Œå°†å¤åˆ¶åˆ°çš„URLæ·»åŠ åˆ°æŒ‡å®šçš„ä½ç½®ä¸­å°±å¯ä»¥äº†

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dbcbdcebd8ea4323ad3e5ebdb2bfd51c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ee19135f6dcd44fcb32b4a33c7deeec0~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

æ­¤æ—¶æœ€ä¸‹æ–¹ä¼šå‡ºç°ä¸€æ¡Webhooksçš„è®°å½•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡â€‹`â€‹Testâ€‹`â€‹æŒ‰é’®è¿›è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œ

##### æµ‹è¯•

ç›´æ¥æ¨é€ä¸€ä¸ªäº‹ä»¶ï¼Œçœ‹çœ‹Jenkinsèƒ½ä¸èƒ½æ¥æ”¶åˆ°

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ff7d886a423413fbe0e480c4d3a042b~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

å¼€å§‹æ„å»ºçš„è¯å°±è¯´æ˜Webhooksçš„æ–¹å¼å·²ç»æ„å»ºæˆåŠŸã€‚æµ‹è¯•å®Œæˆï¼Œæ”¶å·¥ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1282b898126342bdafd67569aea45461~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp)

å½“å‰æµ‹è¯•é€šäº†æœ€åï¼Œé‚£ä¹ˆé€šè¿‡gitæäº¤ä»£ç ä¹‹åï¼ŒJenkinså¯¹é¡¹ç›®è¿›è¡Œæ„å»ºé‚£ä¹Ÿæ˜¯å¿…ç„¶å¯ä»¥æ­£å¸¸æ‰§è¡Œçš„ã€‚

æœ€å
--

åˆ°è¿™é‡Œå…³äºJenkinsè§¦å‘å™¨ç›¸å…³çš„å†…å®¹å°±ä»‹ç»çš„å·®ä¸å¤šäº†ã€‚æˆ‘ä»¬åªæ˜¯åˆ—ä¸¾å‡ºå‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„è§¦å‘å™¨ï¼Œå¦‚æœæœ‰æ¶‰åŠåˆ°éœ€è¦ä½¿ç”¨å…¶ä»–è§¦å‘å™¨çš„å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ã€‚